# =============================================================================
# TRAEFIK v3.0 ENVIRONMENT VARIABLES - COMPREHENSIVE EXAMPLE
# =============================================================================
# Complete configuration options for Traefik reverse proxy with ACME/Let's Encrypt
# All variables use TRAEFIK_ prefix and follow the pattern:
# TRAEFIK_<SECTION>_<SUBSECTION>_<KEY>=<VALUE>
# Reference: https://doc.traefik.io/traefik/reference/install-configuration/boot-environment/

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Installation Root Path
INSTALL_ROOT=${DANGERPREP_INSTALL_ROOT:-/opt/dangerprep}

# Timezone Configuration
TZ=America/Los_Angeles

# -----------------------------------------------------------------------------
# ACME / Let's Encrypt Configuration
# -----------------------------------------------------------------------------
# Email address for ACME registration (required for Let's Encrypt)
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_EMAIL=your-email@example.com

# DNS Challenge Provider (cloudflare, route53, digitalocean, etc.)
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_DNSCHALLENGE_PROVIDER=cloudflare

# DNS Resolvers for ACME challenge verification
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_DNSCHALLENGE_RESOLVERS=1.1.1.1:53,8.8.8.8:53

# ACME Certificate Storage (default: acme.json in container)
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_STORAGE=/data/acme.json

# ACME CA Server (default: Let's Encrypt production)
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_CASERVER=https://acme-v02.api.letsencrypt.org/directory

# ACME Staging Server (for testing)
# TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_CASERVER=https://acme-staging-v02.api.letsencrypt.org/directory

# DNS Challenge Propagation Settings
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_DNSCHALLENGE_DELAYBEFORECHECK=60
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_DNSCHALLENGE_PROPAGATIONTIMEOUT=120

# -----------------------------------------------------------------------------
# Cloudflare DNS Provider Configuration
# -----------------------------------------------------------------------------
# Option 1: Use API Key (legacy method)
CF_API_EMAIL=your-email@example.com
CF_API_KEY=your-cloudflare-api-key

# Option 2: Use API Token (recommended method)
CF_DNS_API_TOKEN=your-cloudflare-dns-api-token

# Cloudflare Zone API Token (if using zone-specific token)
CF_ZONE_API_TOKEN=your-zone-api-token

# -----------------------------------------------------------------------------
# Core Traefik Configuration
# -----------------------------------------------------------------------------
# Global Configuration
TRAEFIK_GLOBAL_CHECKNEWVERSION=false
TRAEFIK_GLOBAL_SENDANONYMOUSUSAGE=false

# API Configuration
TRAEFIK_API=true
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_DEBUG=false
TRAEFIK_API_INSECURE=false

# Entry Points Configuration
TRAEFIK_ENTRYPOINTS_WEB_ADDRESS=:80
TRAEFIK_ENTRYPOINTS_WEBSECURE_ADDRESS=:443

# HTTP to HTTPS Redirect
TRAEFIK_ENTRYPOINTS_WEB_HTTP_REDIRECTIONS_ENTRYPOINT_TO=websecure
TRAEFIK_ENTRYPOINTS_WEB_HTTP_REDIRECTIONS_ENTRYPOINT_SCHEME=https

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# Traefik Dashboard Authentication
# Generate with: htpasswd -nb admin password
TRAEFIK_AUTH_USERS=admin:$2y$10$example-hash

# Basic Auth Middleware
TRAEFIK_HTTP_MIDDLEWARES_AUTH_BASICAUTH_USERS=${TRAEFIK_AUTH_USERS}

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log Level (DEBUG, INFO, WARN, ERROR, FATAL, PANIC)
TRAEFIK_LOG_LEVEL=INFO

# Log Format (json, common)
TRAEFIK_LOG_FORMAT=common

# Log File Path
TRAEFIK_LOG_FILEPATH=/var/log/traefik.log

# Access Logs
TRAEFIK_ACCESSLOG=true
TRAEFIK_ACCESSLOG_FILEPATH=/var/log/access.log
TRAEFIK_ACCESSLOG_FORMAT=common

# -----------------------------------------------------------------------------
# Providers Configuration
# -----------------------------------------------------------------------------
# Docker Provider
TRAEFIK_PROVIDERS_DOCKER=true
TRAEFIK_PROVIDERS_DOCKER_EXPOSEDBYDEFAULT=false
TRAEFIK_PROVIDERS_DOCKER_NETWORK=traefik

# File Provider
TRAEFIK_PROVIDERS_FILE_DIRECTORY=/etc/traefik/dynamic
TRAEFIK_PROVIDERS_FILE_WATCH=true

# -----------------------------------------------------------------------------
# Metrics and Monitoring
# -----------------------------------------------------------------------------
# Prometheus Metrics
TRAEFIK_METRICS_PROMETHEUS=true
TRAEFIK_METRICS_PROMETHEUS_ADDENTRYPOINTSLABELS=true
TRAEFIK_METRICS_PROMETHEUS_ADDSERVICESLABELS=true

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# TLS Configuration
TRAEFIK_ENTRYPOINTS_WEBSECURE_HTTP_TLS=true
TRAEFIK_ENTRYPOINTS_WEBSECURE_HTTP_TLS_OPTIONS=default

# Security Headers (configured via dynamic config or labels)
TRAEFIK_ENTRYPOINTS_WEBSECURE_HTTP_MIDDLEWARES=security-headers@file

# -----------------------------------------------------------------------------
# Advanced Configuration
# -----------------------------------------------------------------------------
# Cluster Store (for HA setups)
TRAEFIK_CLUSTER_STORE=consul
TRAEFIK_CLUSTER_PREFIX=traefik

# Rate Limiting
TRAEFIK_ENTRYPOINTS_WEBSECURE_HTTP_MIDDLEWARES=rate-limit@file

# -----------------------------------------------------------------------------
# Development/Debug Settings
# -----------------------------------------------------------------------------
# Enable debug mode
# TRAEFIK_LOG_LEVEL=DEBUG
# TRAEFIK_API_DEBUG=true

# Disable SSL verification (not recommended for production)
# TRAEFIK_SERVERSTRANSPORT_INSECURESKIPVERIFY=true
