# =============================================================================
# STEP-CA ENVIRONMENT VARIABLES - SIMPLIFIED CONFIGURATION
# =============================================================================
# Minimal configuration for Smallstep Step-CA certificate authority
# Reference: https://hub.docker.com/r/smallstep/step-ca

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Installation Root Path
INSTALL_ROOT=${DANGERPREP_INSTALL_ROOT:-/opt/dangerprep}

# Timezone Configuration
TZ={{TZ}}

# -----------------------------------------------------------------------------
# Step-CA Docker Initialization Variables (Required)
# -----------------------------------------------------------------------------

# PROMPT: CA Name - will be the issuer of your CA certificates
DOCKER_STEPCA_INIT_NAME=DangerPrep Root CA

# DNS Names/IPs - hostnames or IPs that the CA will accept requests on (comma-separated)
DOCKER_STEPCA_INIT_DNS_NAMES=ca.danger,step-ca.danger,step-ca-step-ca-1,localhost,127.0.0.1

# Initial Admin Provisioner Name (default: "admin")
DOCKER_STEPCA_INIT_PROVISIONER_NAME=admin

# Enable SSH CA (set to any non-empty value to enable)
# DOCKER_STEPCA_INIT_SSH=true

# GENERATE[32,password]: Certificate Authority root password
# DOCKER_STEPCA_INIT_PASSWORD=change_me_ca_root_password

# -----------------------------------------------------------------------------
# CA Download Service Configuration
# -----------------------------------------------------------------------------

# PROMPT: Organization name for certificate generation
CA_ORGANIZATION=DangerPrep

# PROMPT: Country code for certificate generation
CA_COUNTRY=US

# PROMPT: State/province for certificate generation
CA_PROVINCE=State

# PROMPT: City/locality for certificate generation
CA_LOCALITY=City

# -----------------------------------------------------------------------------
# Step-CA Runtime Configuration
# -----------------------------------------------------------------------------
# Configuration file path (inside container)
# STEPPATH=/home/step

# Database path (inside container)
# STEP_CA_DATABASE=/home/step/db

# Certificate and key paths (inside container)
# STEP_CA_ROOT_CERT=/home/step/certs/root_ca.crt
# STEP_CA_INTERMEDIATE_CERT=/home/step/certs/intermediate_ca.crt
# STEP_CA_ROOT_KEY=/home/step/secrets/root_ca_key
# STEP_CA_INTERMEDIATE_KEY=/home/step/secrets/intermediate_ca_key

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
# Port for Step-CA API (default: 9000)
# STEP_CA_PORT=9000

# Address to bind to (default: :9000)
# STEP_CA_ADDRESS=:9000

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Password file path (inside container)
# STEP_CA_PASSWORD_FILE=/home/step/secrets/password

# Enable/disable TLS
STEP_CA_TLS=true

# Minimum TLS version (1.2, 1.3)
STEP_CA_MIN_TLS_VERSION=1.2

# Maximum TLS version (1.2, 1.3)
STEP_CA_MAX_TLS_VERSION=1.3

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level (panic, fatal, error, warn, info, debug, trace)
STEP_CA_LOG_LEVEL=info

# Log format (text, json)
STEP_CA_LOG_FORMAT=text

# -----------------------------------------------------------------------------
# ACME Configuration
# -----------------------------------------------------------------------------
# Enable ACME provisioner
STEP_CA_ACME_ENABLED=true

# ACME provisioner name
STEP_CA_ACME_PROVISIONER=acme

# -----------------------------------------------------------------------------
# SSH Configuration (if SSH CA is enabled)
# -----------------------------------------------------------------------------
# SSH host certificate duration (default: 24h)
# STEP_CA_SSH_HOST_DURATION=24h

# SSH user certificate duration (default: 16h)
# STEP_CA_SSH_USER_DURATION=16h

# SSH host certificate template
# STEP_CA_SSH_HOST_TEMPLATE=/home/step/templates/ssh/host.tpl

# SSH user certificate template
# STEP_CA_SSH_USER_TEMPLATE=/home/step/templates/ssh/user.tpl

# -----------------------------------------------------------------------------
# Provisioner Configuration
# -----------------------------------------------------------------------------
# Default certificate duration (default: 24h)
STEP_CA_DEFAULT_CERT_DURATION=720h

# Maximum certificate duration (default: 24h)
STEP_CA_MAX_CERT_DURATION=8760h

# Minimum certificate duration (default: 5m)
STEP_CA_MIN_CERT_DURATION=24h

# Default certificate renewal duration (default: 16h)
STEP_CA_DEFAULT_CERT_RENEWAL=240h

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Database type (badger, bbolt, mysql, postgres)
# STEP_CA_DB_TYPE=badger

# Database connection string (for external databases)
# STEP_CA_DB_CONNECTION_STRING=badger:///home/step/db

# Database table prefix
# STEP_CA_DB_TABLE_PREFIX=step_

# -----------------------------------------------------------------------------
# Webhook Configuration
# -----------------------------------------------------------------------------
# Enable webhooks
# STEP_CA_WEBHOOKS_ENABLED=false

# Webhook URL
# STEP_CA_WEBHOOK_URL=https://webhook.danger/step-ca

# GENERATE[32]: Webhook secret for Step-CA notifications
# STEP_CA_WEBHOOK_SECRET=change_me_webhook_secret

# -----------------------------------------------------------------------------
# Metrics and Monitoring
# -----------------------------------------------------------------------------
# Enable metrics endpoint
# STEP_CA_METRICS_ENABLED=false

# Metrics address (default: :9090)
# STEP_CA_METRICS_ADDRESS=:9090

# Health check endpoint
# STEP_CA_HEALTH_ENABLED=true

# -----------------------------------------------------------------------------
# Development/Debug Configuration
# -----------------------------------------------------------------------------
# Enable debug mode
# STEP_CA_DEBUG=false

# Enable profiling
# STEP_CA_PROFILING=false

# Profiling address (default: :6060)
# STEP_CA_PROFILING_ADDRESS=:6060
