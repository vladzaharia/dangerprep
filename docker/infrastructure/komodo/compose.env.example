# =============================================================================
# KOMODO ENVIRONMENT VARIABLES - COMPREHENSIVE EXAMPLE
# =============================================================================
# Complete configuration options for Komodo Docker Management Platform
# Reference: https://komo.do/docs/setup/mongo

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Installation Root Path
INSTALL_ROOT=${DANGERPREP_INSTALL_ROOT:-/opt/dangerprep}

# Timezone Configuration
TZ={{TZ}}

# User/Group IDs for file permissions
PUID=1337
PGID=1337

# -----------------------------------------------------------------------------
# MongoDB Database Configuration
# -----------------------------------------------------------------------------
# GENERATE[12]: MongoDB root username
KOMODO_DB_USERNAME=komodo_admin

# GENERATE[32]: MongoDB root password
KOMODO_DB_PASSWORD=change_me_db_password

# -----------------------------------------------------------------------------
# Komodo Core Configuration
# -----------------------------------------------------------------------------
# Komodo version tag (latest or specific version)
COMPOSE_KOMODO_IMAGE_TAG=latest

# GENERATE[32]: Secure passkey for Core/Periphery authentication
KOMODO_PASSKEY=change_me_passkey

# Host URL for Komodo (used for OAuth/webhooks/reverse proxy)
KOMODO_HOST=https://docker.danger

# Displayed in browser tab
KOMODO_TITLE=DangerPrep Docker Management

# First server configuration (points to periphery service)
KOMODO_FIRST_SERVER=https://periphery:8120
KOMODO_FIRST_SERVER_NAME=Local

# Disable confirmation dialogs (make buttons single-click)
KOMODO_DISABLE_CONFIRM_DIALOG=false

# -----------------------------------------------------------------------------
# Monitoring and Polling Configuration
# -----------------------------------------------------------------------------
# Rate Komodo polls servers for status/stats/alerting
# Options: 1-sec, 5-sec, 15-sec, 1-min, 5-min, 15-min
KOMODO_MONITORING_INTERVAL=15-sec

# Interval for polling resources for updates/automated actions
# Options: 15-min, 1-hr, 2-hr, 6-hr, 12-hr, 1-day
KOMODO_RESOURCE_POLL_INTERVAL=1-hr

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# GENERATE[32]: Webhook authentication secret
KOMODO_WEBHOOK_SECRET=change_me_webhook_secret

# GENERATE[32]: JWT token generation secret
KOMODO_JWT_SECRET=change_me_jwt_secret

# JWT token time to live
# Options: 1-hr, 12-hr, 1-day, 3-day, 1-wk, 2-wk
KOMODO_JWT_TTL=1-day

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# Enable local username/password authentication
KOMODO_LOCAL_AUTH=true

# PROMPT[text]: Initial admin username
KOMODO_INIT_ADMIN_USERNAME=admin

# PROMPT[password]: Initial admin password
KOMODO_INIT_ADMIN_PASSWORD=changeme

# Disable new user registrations
KOMODO_DISABLE_USER_REGISTRATION=false

# Auto-enable new user logins
KOMODO_ENABLE_NEW_USERS=false

# Disable non-admin resource creation
KOMODO_DISABLE_NON_ADMIN_CREATE=false

# Allow all users read access to all resources
KOMODO_TRANSPARENT_MODE=false

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Pretty logging with empty lines between logs
KOMODO_LOGGING_PRETTY=false

# Human readable startup config logging
KOMODO_PRETTY_STARTUP_CONFIG=false

# -----------------------------------------------------------------------------
# OAuth Configuration (Optional)
# -----------------------------------------------------------------------------
# OIDC Login
KOMODO_OIDC_ENABLED=false
# KOMODO_OIDC_PROVIDER=https://oidc.provider.internal/application/o/komodo
# KOMODO_OIDC_REDIRECT_HOST=https://oidc.provider.external
# KOMODO_OIDC_CLIENT_ID=
# KOMODO_OIDC_CLIENT_SECRET=
# KOMODO_OIDC_USE_FULL_EMAIL=true

# GitHub OAuth
KOMODO_GITHUB_OAUTH_ENABLED=false
# KOMODO_GITHUB_OAUTH_ID=
# KOMODO_GITHUB_OAUTH_SECRET=

# Google OAuth
KOMODO_GOOGLE_OAUTH_ENABLED=false
# KOMODO_GOOGLE_OAUTH_ID=
# KOMODO_GOOGLE_OAUTH_SECRET=

# -----------------------------------------------------------------------------
# AWS Configuration (Optional - for Builder instances)
# -----------------------------------------------------------------------------
# KOMODO_AWS_ACCESS_KEY_ID=
# KOMODO_AWS_SECRET_ACCESS_KEY=

# -----------------------------------------------------------------------------
# Komodo Periphery Configuration
# -----------------------------------------------------------------------------
# Periphery root directory
PERIPHERY_ROOT_DIRECTORY=/etc/komodo

# Periphery passkeys (must include KOMODO_PASSKEY)
PERIPHERY_PASSKEYS=${KOMODO_PASSKEY}

# Disable terminal access in Periphery container
PERIPHERY_DISABLE_TERMINALS=false

# Enable SSL with self-signed certificates
PERIPHERY_SSL_ENABLED=true

# Disk mount filtering (if disk size overreporting occurs)
PERIPHERY_INCLUDE_DISK_MOUNTS=/etc/hostname
# PERIPHERY_EXCLUDE_DISK_MOUNTS=/snap,/etc/repos

# Periphery logging configuration
PERIPHERY_LOGGING_PRETTY=false
PERIPHERY_PRETTY_STARTUP_CONFIG=false

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
# Path for database backups
COMPOSE_KOMODO_BACKUPS_PATH=/data/komodo/backups

# Maximum number of backups to retain
KOMODO_CLI_MAX_BACKUPS=30

# -----------------------------------------------------------------------------
# Advanced Configuration
# -----------------------------------------------------------------------------
# Node.js environment for any Node-based components
NODE_ENV=production

# Enable debug mode
DEBUG=false
