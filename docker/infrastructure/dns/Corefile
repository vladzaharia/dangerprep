# CoreDNS configuration for local domain resolution
# This file is managed by the dns-registrar service

# Local domain resolution - Internal (.danger)
danger {
    file /etc/coredns/db.danger
    log
    errors
}

# Local domain resolution - External (.danger.diy)
danger.diy {
    file /etc/coredns/db.danger.diy
    log
    errors
}

# Fallback to upstream DNS (AdGuard Home)
# Use IP address instead of hostname to avoid circular dependency
. {
    forward . 172.20.0.2:53
    log
    errors
    cache 30
}
