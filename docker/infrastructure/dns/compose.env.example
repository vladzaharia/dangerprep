# =============================================================================
# DNS INFRASTRUCTURE ENVIRONMENT VARIABLES - COMPREHENSIVE EXAMPLE
# =============================================================================
# Complete configuration options for DNS services (AdGuard Home + CoreDNS)
# Note: AdGuard Home does not support environment variables for configuration
# CoreDNS uses configuration files rather than environment variables

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Installation Root Path
INSTALL_ROOT=${DANGERPREP_INSTALL_ROOT:-/opt/dangerprep}

# Timezone Configuration
TZ=America/Los_Angeles

# User/Group IDs for file permissions
PUID=1337
PGID=1337

# -----------------------------------------------------------------------------
# AdGuard Home Configuration
# -----------------------------------------------------------------------------
# Note: AdGuard Home does not support environment variable configuration
# All configuration is done through config files and the web interface
# Configuration file: /opt/adguardhome/conf/AdGuardHome.yaml

# Web interface port (configured in AdGuardHome.yaml)
AGH_WEB_PORT=3000

# DNS port (configured in AdGuardHome.yaml)
AGH_DNS_PORT=53

# -----------------------------------------------------------------------------
# CoreDNS Configuration
# -----------------------------------------------------------------------------
# Note: CoreDNS uses Corefile for configuration, not environment variables
# Configuration file: /etc/coredns/Corefile

# CoreDNS port (typically configured in Corefile)
COREDNS_PORT=53

# -----------------------------------------------------------------------------
# DNS Chain Configuration (for DangerPrep)
# -----------------------------------------------------------------------------
# DNS update interval for configuration changes
DNS_UPDATE_INTERVAL=30

# DNS forwarding configuration
# Primary upstream DNS (NextDNS)
UPSTREAM_DNS_PRIMARY=45.90.28.0#nextdns-ultralow
UPSTREAM_DNS_SECONDARY=45.90.30.0#nextdns-ultralow

# Local DNS resolution
LOCAL_DNS_DOMAIN=danger
LOCAL_DNS_NETWORK=192.168.120.0/22

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level for DNS services
DNS_LOG_LEVEL=info

# Log format (text, json)
DNS_LOG_FORMAT=text

# Enable query logging
DNS_QUERY_LOG=true

# Log file paths
AGH_LOG_FILE=/opt/adguardhome/logs/AdGuardHome.log
COREDNS_LOG_FILE=/var/log/coredns.log

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Enable DNS-over-HTTPS (DoH)
DNS_DOH_ENABLED=false
DNS_DOH_PORT=443

# Enable DNS-over-TLS (DoT)
DNS_DOT_ENABLED=false
DNS_DOT_PORT=853

# Enable DNSSEC validation
DNS_DNSSEC_ENABLED=true

# -----------------------------------------------------------------------------
# Performance Configuration
# -----------------------------------------------------------------------------
# DNS cache size
DNS_CACHE_SIZE=10000

# DNS cache TTL (seconds)
DNS_CACHE_TTL=3600

# Maximum concurrent queries
DNS_MAX_CONCURRENT_QUERIES=1000

# Query timeout (seconds)
DNS_QUERY_TIMEOUT=5

# -----------------------------------------------------------------------------
# Filtering Configuration (AdGuard Home)
# -----------------------------------------------------------------------------
# Note: These are typically configured through the web interface
# Enable safe browsing
AGH_SAFE_BROWSING=true

# Enable parental control
AGH_PARENTAL_CONTROL=false

# Enable safe search
AGH_SAFE_SEARCH=false

# Custom blocklists (configured in web interface)
AGH_BLOCKLIST_URLS=https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts

# -----------------------------------------------------------------------------
# Statistics Configuration
# -----------------------------------------------------------------------------
# Enable statistics collection
DNS_STATS_ENABLED=true

# Statistics retention period (hours)
DNS_STATS_RETENTION=24

# Enable query log
DNS_QUERY_LOG_ENABLED=true

# Query log retention period (days)
DNS_QUERY_LOG_RETENTION=7

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
# Bind interfaces (all interfaces by default)
DNS_BIND_INTERFACES=0.0.0.0

# IPv6 support
DNS_IPV6_ENABLED=true

# Enable EDNS Client Subnet
DNS_EDNS_CLIENT_SUBNET=false

# -----------------------------------------------------------------------------
# Advanced Configuration
# -----------------------------------------------------------------------------
# Enable DNS rebinding protection
DNS_REBINDING_PROTECTION=true

# Custom DNS rules file
DNS_CUSTOM_RULES_FILE=/config/custom_rules.txt

# Upstream DNS timeout (milliseconds)
DNS_UPSTREAM_TIMEOUT=3000

# Bootstrap DNS servers (for DoH/DoT resolution)
DNS_BOOTSTRAP_SERVERS=1.1.1.1,8.8.8.8

# -----------------------------------------------------------------------------
# Development/Debug Configuration
# -----------------------------------------------------------------------------
# Enable debug logging
DNS_DEBUG=false

# Enable verbose logging
DNS_VERBOSE=false

# Test mode (for development)
DNS_TEST_MODE=false
