# =============================================================================
# COREDNS ENVIRONMENT VARIABLES - COMPREHENSIVE EXAMPLE
# =============================================================================
# Complete configuration options for CoreDNS local resolver service
# Note: CoreDNS uses Corefile for configuration, not environment variables

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Installation Root Path
INSTALL_ROOT=${DANGERPREP_INSTALL_ROOT:-/opt/dangerprep}

# Timezone Configuration
TZ=America/Los_Angeles

# User/Group IDs for file permissions
PUID=1000
PGID=1000

# -----------------------------------------------------------------------------
# CoreDNS Configuration
# -----------------------------------------------------------------------------
# Note: CoreDNS uses Corefile for configuration, not environment variables
# Configuration file: /etc/coredns/Corefile

# CoreDNS port (typically configured in Corefile)
COREDNS_PORT=53

# -----------------------------------------------------------------------------
# DNS Chain Configuration
# -----------------------------------------------------------------------------
# DNS forwarding configuration
# Primary upstream DNS (NextDNS)
UPSTREAM_DNS_PRIMARY=45.90.28.0#nextdns-ultralow
UPSTREAM_DNS_SECONDARY=45.90.30.0#nextdns-ultralow

# Local DNS resolution
LOCAL_DNS_DOMAIN=danger
LOCAL_DNS_NETWORK=192.168.120.0/22

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level for DNS services
DNS_LOG_LEVEL=info

# Log format (text, json)
DNS_LOG_FORMAT=text

# Enable query logging
DNS_QUERY_LOG=true

# Log file paths
COREDNS_LOG_FILE=/var/log/coredns.log

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Enable DNS-over-HTTPS (DoH)
DNS_DOH_ENABLED=false
DNS_DOH_PORT=443

# Enable DNS-over-TLS (DoT)
DNS_DOT_ENABLED=false
DNS_DOT_PORT=853

# Enable DNSSEC validation
DNS_DNSSEC_ENABLED=true

# -----------------------------------------------------------------------------
# Performance Configuration
# -----------------------------------------------------------------------------
# DNS cache size
DNS_CACHE_SIZE=10000

# DNS cache TTL (seconds)
DNS_CACHE_TTL=3600

# Maximum concurrent queries
DNS_MAX_CONCURRENT_QUERIES=1000

# Query timeout (seconds)
DNS_QUERY_TIMEOUT=5

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
# Bind interfaces (all interfaces by default)
DNS_BIND_INTERFACES=0.0.0.0

# IPv6 support
DNS_IPV6_ENABLED=true

# Enable EDNS Client Subnet
DNS_EDNS_CLIENT_SUBNET=false

# -----------------------------------------------------------------------------
# Advanced Configuration
# -----------------------------------------------------------------------------
# Enable DNS rebinding protection
DNS_REBINDING_PROTECTION=true

# Custom DNS rules file
DNS_CUSTOM_RULES_FILE=/config/custom_rules.txt

# Upstream DNS timeout (milliseconds)
DNS_UPSTREAM_TIMEOUT=3000

# Bootstrap DNS servers (for DoH/DoT resolution)
DNS_BOOTSTRAP_SERVERS=1.1.1.1,8.8.8.8
