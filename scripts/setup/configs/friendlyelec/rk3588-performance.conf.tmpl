# RK3588/RK3588S performance optimization configuration
# Kernel parameters for optimal performance on FriendlyElec hardware

# CPU frequency scaling
# Set CPU governors to performance for better responsiveness
# This will be applied via systemd service

# Memory management optimizations for RK3588/RK3588S
vm.swappiness = 10
vm.vfs_cache_pressure = 50
vm.dirty_background_ratio = 5
vm.dirty_ratio = 10
vm.dirty_expire_centisecs = 3000
vm.dirty_writeback_centisecs = 500

# Network buffer optimizations for high-speed interfaces
net.core.rmem_default = 262144
net.core.rmem_max = 16777216
net.core.wmem_default = 262144
net.core.wmem_max = 16777216
net.core.netdev_max_backlog = 5000

# TCP optimizations for RK3588 networking
net.ipv4.tcp_rmem = 4096 65536 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
net.ipv4.tcp_congestion_control = bbr
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_fack = 1

# File system optimizations
fs.file-max = 2097152
fs.inotify.max_user_watches = 524288
fs.inotify.max_user_instances = 256

# Kernel scheduler optimizations
kernel.sched_migration_cost_ns = 5000000
kernel.sched_autogroup_enabled = 0

# Memory allocation optimizations
vm.min_free_kbytes = 65536
vm.zone_reclaim_mode = 0

# I/O scheduler will be set via udev rules:
# - NVMe: mq-deadline
# - eMMC: deadline
# - SD cards: noop or deadline
