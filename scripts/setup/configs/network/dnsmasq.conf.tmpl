# DangerPrep DNS and DHCP Configuration

# Interface binding
interface={{WIFI_INTERFACE}}
bind-interfaces
listen-address={{LAN_IP}}

# DHCP configuration
dhcp-range={{DHCP_START}},{{DHCP_END}},12h
dhcp-option=3,{{LAN_IP}}  # Default gateway
dhcp-option=6,{{LAN_IP}}  # DNS server

# DNS configuration
server=1.1.1.1
server=8.8.8.8
server=2606:4700:4700::1111
server=2001:4860:4860::8888

# Local domain resolution (.danger domains)
local=/danger/
domain=danger
expand-hosts
address=/adguard.danger/{{LAN_IP}}
address=/step-ca.danger/{{LAN_IP}}
address=/kiwix.danger/{{LAN_IP}}
address=/portal.danger/{{LAN_IP}}
address=/dns.danger/{{LAN_IP}}

# Local domain
domain=dangerprep.local
expand-hosts

# Cache settings
cache-size=1000
neg-ttl=60

# Logging
log-queries
log-dhcp
log-facility=/var/log/dnsmasq.log

# Security
bogus-priv
domain-needed
stop-dns-rebind
rebind-localhost-ok

# Performance
dns-forward-max=150
